
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Machines.TinyG &#8212; ESCMillPCB  documentation</title>
    <link rel="stylesheet" href="../../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../docindex.html">ESCMillPCB  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Module code</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for Machines.TinyG</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Created on 24.02.2018</span>

<span class="sd">@author: Christian Ott</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">logging</span>
<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">PyQt5</span> <span class="k">import</span> <span class="n">QtCore</span><span class="p">,</span> <span class="n">QtWidgets</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="c1">#import io</span>
<span class="kn">import</span> <span class="nn">serial</span>
<span class="kn">import</span> <span class="nn">serial.tools.list_ports</span> <span class="k">as</span> <span class="nn">slp</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">pyqtgraph.parametertree.parameterTypes</span> <span class="k">as</span> <span class="nn">ptypes</span>

<span class="kn">import</span> <span class="nn">Base.Errors</span> <span class="k">as</span> <span class="nn">errs</span>
<span class="kn">from</span> <span class="nn">Base.MachineBase</span> <span class="k">import</span> <span class="n">MachineBase</span>
<span class="kn">from</span> <span class="nn">ui.TinyGCycleControl</span> <span class="k">import</span> <span class="n">TinyGCycleControl</span>
<span class="kn">from</span> <span class="nn">ui.TinyGTestpanel</span> <span class="k">import</span> <span class="n">TinyGTestpanel</span>


<div class="viewcode-block" id="TinyGSender"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyGSender">[docs]</a><span class="k">class</span> <span class="nc">TinyGSender</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">QObject</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Worker class which sends commands to the TinyG board. Will be run in a separate thread.</span>

<span class="sd">    This class manages a command buffer to implement TinyG&#39;s linemode protocol.</span>
<span class="sd">    (See https://github.com/synthetos/TinyG/wiki/Tinyg-Communications-Programming)</span>

<span class="sd">    Inherits from QObject to support Qt&#39;s threading and signal/slot mechanisms.</span>

<span class="sd">    ===================  ===================================================================================</span>
<span class="sd">    **Signals**</span>
<span class="sd">    ===================  ===================================================================================</span>
<span class="sd">    sigQueryReceived     Emitted when the answer to a query command is received.</span>
<span class="sd">                         Carries a command response dictionary.</span>
<span class="sd">    sigBufferChanged     Emitted when the output buffer content changed.</span>
<span class="sd">                         Carries a dictionary {&#39;sendbuffersize&#39;, &#39;usedlines&#39;}</span>
<span class="sd">    ===================  ===================================================================================</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="n">sigQueryReceived</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>
    <span class="n">sigBufferChanged</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tinyg</span><span class="p">,</span> <span class="n">receiver</span><span class="p">,</span> <span class="n">maxlines</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructor</span>

<span class="sd">        :param TinyG tinyg: TinyG object using the sender.</span>
<span class="sd">        :param TinyGReciever receiver: Currently active TinyGSender object.</span>
<span class="sd">        :param int maxlines: Maximal number of lines to be stored in the TinyG board&#39;s linebuffer.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">tinyg</span> <span class="o">=</span> <span class="n">tinyg</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">receiver</span> <span class="o">=</span> <span class="n">receiver</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maxlines</span> <span class="o">=</span> <span class="n">maxlines</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sendbuffer</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">querybuffer</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lastQueryResult</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">freelines</span> <span class="o">=</span> <span class="n">maxlines</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">testpanel</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">settings</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cycledlg</span> <span class="o">=</span> <span class="kc">None</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">tinyg</span><span class="o">.</span><span class="n">sigCommand</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">appendCommand</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tinyg</span><span class="o">.</span><span class="n">sigQuery</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">appendQuery</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tinyg</span><span class="o">.</span><span class="n">sigFeedhold</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">feedhold</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tinyg</span><span class="o">.</span><span class="n">sigResume</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resume</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tinyg</span><span class="o">.</span><span class="n">sigStop</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tinyg</span><span class="o">.</span><span class="n">sigReset</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">receiver</span><span class="o">.</span><span class="n">sigResponseReceived</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">signalReceived</span><span class="p">)</span>
            
    
<div class="viewcode-block" id="TinyGSender.getLastQueryResult"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyGSender.getLastQueryResult">[docs]</a>    <span class="k">def</span> <span class="nf">getLastQueryResult</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :returns: result of the last successful query</span>
<span class="sd">        :rtype: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastQueryResult</span></div>
    
    
    <span class="k">def</span> <span class="nf">_work</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles sending lines to the board to keep the linebuffer filled.</span>
<span class="sd">        Should not be called directy.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sendbuffer</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">freelines</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tinyg</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sendbuffer</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">freelines</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Free line buffers: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">freelines</span><span class="p">)</span>
            <span class="c1"># check if linebuffer is in sync</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">freelines</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;freelines &lt; 0! Linebuffer out of sync?&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">freelines</span> <span class="o">=</span> <span class="mi">0</span>
                
                
    <span class="k">def</span> <span class="nf">_handleError</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Filters and logs error responses.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;f&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1"># filter lesser warnings (currently only 201 &quot;MINIMUM_LENGTH_MOVE&quot;</span>
            <span class="k">if</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;f&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">201</span><span class="p">,):</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;TinyG response contains a warning. Command </span><span class="si">%s</span><span class="s2">, error </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;r&#39;</span><span class="p">],</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;f&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;TinyG response contains an error. Command </span><span class="si">%s</span><span class="s2">, error </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;r&#39;</span><span class="p">],</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;f&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
                
    
<div class="viewcode-block" id="TinyGSender.appendCommand"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyGSender.appendCommand">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">appendCommand</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cmd</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Append a simple command to the command buffer.</span>
<span class="sd">        Not meant to be called directly, commands should be passed by the :attr:`TinyG.sigCommand` signal.</span>

<span class="sd">        :param dict cmd: command</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Appended command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">cmd</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sendbuffer</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_work</span><span class="p">()</span></div>
    
    
<div class="viewcode-block" id="TinyGSender.appendQuery"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyGSender.appendQuery">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">appendQuery</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cmd</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Append a query command to the command buffer.</span>
<span class="sd">        Queries can only be processed one at a time - use :meth:`TinyG.executeQuery` for synchronous processing.</span>
<span class="sd">        The answer to queries is returned via the sigQueryReceived signal and also stored in the</span>
<span class="sd">        lastQueryResult field.</span>

<span class="sd">        Not meant to be called directly, commands should be passed by the :attr:`TinyG.sigQuery` signal.</span>

<span class="sd">        :parmam dict cmd: command</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Appended query: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">cmd</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sendbuffer</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">querybuffer</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">cmd</span><span class="o">.</span><span class="n">keys</span><span class="p">())[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_work</span><span class="p">()</span></div>
        
        
<div class="viewcode-block" id="TinyGSender.feedhold"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyGSender.feedhold">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">feedhold</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sends a feedhold command.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tinyg</span><span class="o">.</span><span class="n">sendRaw</span><span class="p">(</span><span class="s2">&quot;!&quot;</span><span class="p">)</span></div>
    
    
<div class="viewcode-block" id="TinyGSender.resume"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyGSender.resume">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">resume</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sends a resume command.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tinyg</span><span class="o">.</span><span class="n">sendRaw</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">)</span></div>
    
    
<div class="viewcode-block" id="TinyGSender.stop"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyGSender.stop">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sends a stop command and resets output buffers.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sendbuffer</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tinyg</span><span class="o">.</span><span class="n">sendRaw</span><span class="p">(</span><span class="s2">&quot;!%&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">freelines</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxlines</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigBufferChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">({</span><span class="s1">&#39;sendbuffersize&#39;</span><span class="p">:</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sendbuffer</span><span class="p">),</span> 
                                    <span class="s1">&#39;usedlines&#39;</span><span class="p">:(</span><span class="bp">self</span><span class="o">.</span><span class="n">maxlines</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">freelines</span><span class="p">)})</span></div>


<div class="viewcode-block" id="TinyGSender.reset"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyGSender.reset">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sends a reset command and resets output buffers.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sendbuffer</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tinyg</span><span class="o">.</span><span class="n">sendRaw</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\x18</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># reset: Cancel character (Ctrl-x)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">freelines</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxlines</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigBufferChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">({</span><span class="s1">&#39;sendbuffersize&#39;</span><span class="p">:</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sendbuffer</span><span class="p">),</span> 
                                    <span class="s1">&#39;usedlines&#39;</span><span class="p">:(</span><span class="bp">self</span><span class="o">.</span><span class="n">maxlines</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">freelines</span><span class="p">)})</span></div>
    
    
<div class="viewcode-block" id="TinyGSender.signalReceived"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyGSender.signalReceived">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">signalReceived</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        When a response is received by the :class:`TinyGReceiver` object it is then passed to this slot.</span>

<span class="sd">        :param dict msg: message</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">freelines</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Free line buffers: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">freelines</span><span class="p">)</span>
        <span class="c1"># check if linebuffer is in sync</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">freelines</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxlines</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;maxlines exceeded! Linebuffer out of sync?&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">freelines</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxlines</span>
        <span class="c1"># check if the response contains an error</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_handleError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="c1"># check if response is in querybuffer</span>
        <span class="k">if</span> <span class="nb">list</span><span class="p">(</span><span class="n">msg</span><span class="p">[</span><span class="s2">&quot;r&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">querybuffer</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">querybuffer</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lastQueryResult</span> <span class="o">=</span> <span class="n">msg</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sigQueryReceived</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_work</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigBufferChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">({</span><span class="s1">&#39;sendbuffersize&#39;</span><span class="p">:</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sendbuffer</span><span class="p">),</span> 
                                    <span class="s1">&#39;usedlines&#39;</span><span class="p">:(</span><span class="bp">self</span><span class="o">.</span><span class="n">maxlines</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">freelines</span><span class="p">)})</span></div></div>
    
    
    
<div class="viewcode-block" id="TinyGReceiver"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyGReceiver">[docs]</a><span class="k">class</span> <span class="nc">TinyGReceiver</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">QObject</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Worker class which receives responses from the TinyG board. Will be run in a separate thread.</span>

<span class="sd">    Until the thread is stopped, this class waits for received messages and passes the answers to the</span>
<span class="sd">    sender thread where they will be processed and eventually passed to the main thread.</span>

<span class="sd">    Inherits from QObject to support Qt&#39;s threading and signal/slot mechanisms.</span>

<span class="sd">    =========================  ===============================================================================</span>
<span class="sd">    **Signals**</span>
<span class="sd">    =========================  ===============================================================================</span>
<span class="sd">    sigResponseReceived        Emitted when a response is received from the TinyG board.</span>
<span class="sd">                               This signal&#39;s purpose is to pass the raw responses to the active TinyGSender</span>
<span class="sd">                               object which runs in a separate thread.</span>
<span class="sd">                               Carries a dictionary containing the response.</span>
<span class="sd">    sigSystemReadyReceived     Emitted when a system ready response is received.</span>
<span class="sd">                               Carries a dictionary containing the response.</span>
<span class="sd">    sigStatusReportReceived    Emitted when a status report is received from the TinyG board.</span>
<span class="sd">                               Carries a dictionary containing the status report.</span>
<span class="sd">    sigQueueReportReceived     Emitted when a queue report is received from the TinyG board.</span>
<span class="sd">                               Carries a dictionary containing the queue report.</span>
<span class="sd">    sigUnknownMessageReceived  Emitted when a unknown message is received.</span>
<span class="sd">                               Carries a dictionary containing the message.</span>
<span class="sd">    =========================  ===============================================================================</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="n">sigResponseReceived</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>
    <span class="n">sigSystemReadyReceived</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>
    <span class="n">sigStatusReportReceived</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>
    <span class="n">sigQueueReportReceived</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>
    <span class="n">sigUnknownMessageReceived</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>
    
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tinyg</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructor</span>

<span class="sd">        :param TinyG tinyg: TinyG object using the sender.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">tinyg</span> <span class="o">=</span> <span class="n">tinyg</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">running</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timer</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tinyg</span><span class="o">.</span><span class="n">sigInitialize</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_run</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tinyg</span><span class="o">.</span><span class="n">sigFinalize</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_quit</span><span class="p">)</span>
        
    
    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Starts the receiver loop. Should not be called directly.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">running</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="c1"># QTimers with timeout=0 will timeout as soon as all events are processed</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timer</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QTimer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">setInterval</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">timeout</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_work</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;TinyGReceiver main loop started.&quot;</span><span class="p">)</span>
        
        
    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_quit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Stops the receiver loop. Should not be called directly.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timer</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">running</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;TinyGReceiver stopped.&quot;</span><span class="p">)</span>
    
    
    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_work</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Receiver loop. Should not be called directly.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tinyg</span><span class="o">.</span><span class="n">receive</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">response</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;r&quot;</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="c1"># special case: SYSTEM READY message after reset</span>
                <span class="k">if</span> <span class="s2">&quot;msg&quot;</span> <span class="ow">in</span> <span class="n">response</span><span class="p">[</span><span class="s1">&#39;r&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="ow">and</span> <span class="n">response</span><span class="p">[</span><span class="s1">&#39;r&#39;</span><span class="p">][</span><span class="s1">&#39;msg&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;SYSTEM READY&quot;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">sigSystemReadyReceived</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">response</span><span class="p">[</span><span class="s1">&#39;r&#39;</span><span class="p">])</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;TinyG reboot complete: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">response</span><span class="p">[</span><span class="s1">&#39;r&#39;</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">sigResponseReceived</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
            <span class="k">elif</span> <span class="s2">&quot;sr&quot;</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sigStatusReportReceived</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
            <span class="k">elif</span> <span class="s2">&quot;qr&quot;</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sigQueueReportReceived</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
            <span class="k">elif</span> <span class="s2">&quot;rx&quot;</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;RX received: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Unknown response received: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sigUnknownMessageReceived</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">response</span><span class="p">)</span></div>



<div class="viewcode-block" id="TinyG"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyG">[docs]</a><span class="k">class</span> <span class="nc">TinyG</span><span class="p">(</span><span class="n">MachineBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Implementation of MachineBase to control a TinyG board.</span>

<span class="sd">    The TinyG board directly understands the g-code language but can only hold up to 8 lines of code.</span>
<span class="sd">    Therefore the g-code program has to be spooled to the board.</span>

<span class="sd">    Workflow of executing the g-code program:</span>
<span class="sd">    - directly send the fist maxlines commands to the board, initialize linesToSend to 0</span>
<span class="sd">    - for each {r:...} response increment linesToSend by 1</span>
<span class="sd">    - as long as freelines &gt; 0, send lines and decrement freelines</span>
<span class="sd">    - do this until the whole programm has been spooled</span>

<span class="sd">    Sending of commands and recieving responses is done asynchronously.</span>

<span class="sd">    ===================  ===================================================================================</span>
<span class="sd">    **Signals**</span>
<span class="sd">    ===================  ===================================================================================</span>
<span class="sd">    sigCommand           Emitted when a command is to be sent by the active TinyGSender object.</span>
<span class="sd">                         This signal&#39;s purpose is to pass commands to the active TinyGSender</span>
<span class="sd">                         object which runs in a separate thread.</span>
<span class="sd">                         Carries a dictionary containing the command with parameters.</span>
<span class="sd">    sigQuery             Emitted when a query command is to be sent by the active TinyGSender object.</span>
<span class="sd">                         This signal&#39;s purpose is to pass query commands to the active TinyGSender</span>
<span class="sd">                         object which runs in a separate thread.</span>
<span class="sd">                         Carries a dictionary containing the command with parameters.</span>
<span class="sd">    sigFeedhold          Emitted when a feedhold is to be performed by the active TinyGSender object.</span>
<span class="sd">                         This signal&#39;s purpose is to pass commands to the active TinyGSender</span>
<span class="sd">                         object which runs in a separate thread.</span>
<span class="sd">    sigResume            Emitted when a resume command is to be sent by the active TinyGSender object.</span>
<span class="sd">                         This signal&#39;s purpose is to pass commands to the active TinyGSender</span>
<span class="sd">                         object which runs in a separate thread.</span>
<span class="sd">    sigStop              Emitted when the current cycle is to be stopped by the active TinyGSender object.</span>
<span class="sd">                         This will cause the TinyGSender object to flush its buffers and the buffers of the</span>
<span class="sd">                         machine.</span>
<span class="sd">                         This signal&#39;s purpose is to pass commands to the active TinyGSender</span>
<span class="sd">                         object which runs in a separate thread.</span>
<span class="sd">    sigReset             Emitted when the machine is to be reset by the active TinyGSender object.</span>
<span class="sd">                         This will cause the TinyGSender object to flush its buffers and the buffers of the</span>
<span class="sd">                         machine.</span>
<span class="sd">                         This signal&#39;s purpose is to pass commands to the active TinyGSender</span>
<span class="sd">                         object which runs in a separate thread.</span>
<span class="sd">    sigInitialize        Connection to TinyG board is opened.</span>
<span class="sd">    sigFinalize          Connection to TinyG board is to be closed.</span>
<span class="sd">    ===================  ===================================================================================</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="n">sigCommand</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>
    <span class="n">sigQuery</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>
    <span class="n">sigFeedhold</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">()</span>
    <span class="n">sigResume</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">()</span>
    <span class="n">sigStop</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">()</span>
    <span class="n">sigReset</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">()</span>
    
    <span class="n">sigInitialize</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">()</span>
    <span class="n">sigFinalize</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">()</span>
    

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">receiver</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">receiverThread</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sender</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">senderThread</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">port</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">io</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">comtimeout</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">querytimeout</span> <span class="o">=</span> <span class="mi">10</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cycleRunning</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plannerBuffer</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">workpieceOffset</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lastStatus</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">homed</span> <span class="o">=</span> <span class="kc">False</span><span class="p">;</span>
        
        
<div class="viewcode-block" id="TinyG.initialize"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyG.initialize">[docs]</a>    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">comparams</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize TinyG communication and settings.</span>
<span class="sd">        Default communication parameters: 115200 baud, 8 data bits, no parity, 1 stop bit, XonXoff flow control</span>

<span class="sd">        :param pyqtgraph.GroupParameter comparams: GroupParameter containing the communication parameters</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">homed</span> <span class="o">=</span> <span class="kc">False</span>
            
            <span class="bp">self</span><span class="o">.</span><span class="n">querytimeout</span> <span class="o">=</span> <span class="n">comparams</span><span class="o">.</span><span class="n">child</span><span class="p">(</span><span class="s1">&#39;timeout&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Connecting to TinyG at port </span><span class="si">%s</span><span class="s2"> (</span><span class="si">%s</span><span class="s2"> baud, </span><span class="si">%s</span><span class="s2">s com timeout, </span><span class="si">%s</span><span class="s2">s query timeout)...&quot;</span><span class="p">,</span> 
                        <span class="n">comparams</span><span class="o">.</span><span class="n">child</span><span class="p">(</span><span class="s1">&#39;com&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">(),</span> <span class="n">comparams</span><span class="o">.</span><span class="n">child</span><span class="p">(</span><span class="s1">&#39;baud&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">(),</span> 
                        <span class="bp">self</span><span class="o">.</span><span class="n">comtimeout</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">querytimeout</span><span class="p">)</span>
                    
            <span class="bp">self</span><span class="o">.</span><span class="n">port</span> <span class="o">=</span> <span class="n">serial</span><span class="o">.</span><span class="n">Serial</span><span class="p">(</span>
                <span class="n">port</span><span class="o">=</span><span class="n">comparams</span><span class="o">.</span><span class="n">child</span><span class="p">(</span><span class="s1">&#39;com&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">(),</span>
                <span class="n">baudrate</span><span class="o">=</span><span class="n">comparams</span><span class="o">.</span><span class="n">child</span><span class="p">(</span><span class="s1">&#39;baud&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">(),</span>
                <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">comtimeout</span><span class="p">,</span>
                <span class="n">xonxoff</span><span class="o">=</span><span class="n">comparams</span><span class="o">.</span><span class="n">child</span><span class="p">(</span><span class="s1">&#39;flowctrl&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">()</span><span class="o">==</span><span class="mi">1</span><span class="p">,</span>
                <span class="n">rtscts</span><span class="o">=</span><span class="n">comparams</span><span class="o">.</span><span class="n">child</span><span class="p">(</span><span class="s1">&#39;flowctrl&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">()</span><span class="o">==</span><span class="mi">2</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">port</span><span class="o">.</span><span class="n">reset_input_buffer</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">port</span><span class="o">.</span><span class="n">reset_output_buffer</span><span class="p">()</span>
            
            <span class="c1"># start sender and receiver threads</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">receiver</span> <span class="o">=</span> <span class="n">TinyGReceiver</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">receiverThread</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QThread</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">receiver</span><span class="o">.</span><span class="n">moveToThread</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">receiverThread</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">receiverThread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">receiver</span><span class="o">.</span><span class="n">sigStatusReportReceived</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">receiver_sigStatusReportReceived</span><span class="p">)</span>
            
            <span class="bp">self</span><span class="o">.</span><span class="n">sender</span> <span class="o">=</span> <span class="n">TinyGSender</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">receiver</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">senderThread</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QThread</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sender</span><span class="o">.</span><span class="n">moveToThread</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">senderThread</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">senderThread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
            
            <span class="bp">self</span><span class="o">.</span><span class="n">sigInitialize</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
            
            <span class="c1"># reset TinyG</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
            <span class="c1"># set strict JSON syntax mode</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">executeCommand</span><span class="p">({</span><span class="s1">&#39;js&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">})</span>
            <span class="c1"># set JSON verbosity to verbose</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">executeCommand</span><span class="p">({</span><span class="s1">&#39;jv&#39;</span><span class="p">:</span><span class="mi">5</span><span class="p">})</span>
            <span class="c1"># enable all status messages</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">executeQuery</span><span class="p">({</span><span class="s1">&#39;sr&#39;</span><span class="p">:{</span>
                <span class="s1">&#39;posx&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;posy&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;posz&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;posa&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;feed&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;vel&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">,</span>
                <span class="s1">&#39;unit&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;coor&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;dist&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;frmo&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;stat&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;momo&#39;</span><span class="p">:</span><span class="kc">True</span>
            <span class="p">}})</span>
            <span class="c1"># enable queue reports</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">executeCommand</span><span class="p">({</span><span class="s1">&#39;qv&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">})</span>
            <span class="c1"># enable filtered automatic status reports</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">executeCommand</span><span class="p">({</span><span class="s1">&#39;sv&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">})</span>
            <span class="c1"># set status report interval</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">executeCommand</span><span class="p">({</span><span class="s1">&#39;si&#39;</span><span class="p">:</span><span class="mi">200</span><span class="p">})</span>
            <span class="c1"># initialize last status report</span>
            <span class="n">report</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">executeQuery</span><span class="p">({</span><span class="s1">&#39;sr&#39;</span><span class="p">:</span><span class="kc">None</span><span class="p">})</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lastStatus</span> <span class="o">=</span> <span class="n">report</span><span class="p">[</span><span class="s1">&#39;r&#39;</span><span class="p">][</span><span class="s1">&#39;sr&#39;</span><span class="p">]</span>
            <span class="c1"># set G54 system to absolute (machine) coordinates</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">executeCommand</span><span class="p">({</span><span class="s1">&#39;gc&#39;</span><span class="p">:</span><span class="s1">&#39;g10l2p1x0y0z0&#39;</span><span class="p">})</span>
            <span class="c1"># set G55 system to default board origin</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">executeCommand</span><span class="p">({</span><span class="s1">&#39;gc&#39;</span><span class="p">:</span><span class="s1">&#39;g10l2p2x</span><span class="si">{}</span><span class="s1">y</span><span class="si">{}</span><span class="s1">z</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">getDefaultOrigin</span><span class="p">())})</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">workpieceOffset</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getDefaultOrigin</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">startCoordinateTimer</span><span class="p">()</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Connected to TinyG.&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">finalize</span><span class="p">()</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">raise</span> <span class="n">e</span></div>
        
        
<div class="viewcode-block" id="TinyG.finalize"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyG.finalize">[docs]</a>    <span class="k">def</span> <span class="nf">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deinitalizes the hardware and finalizes the communication interface.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">isInitialized</span><span class="p">():</span>
            <span class="k">return</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setSpindle</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sigFinalize</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">senderThread</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">senderThread</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="mi">2000</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">receiverThread</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">receiverThread</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="mi">2000</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">port</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;TinyG connection closed.&quot;</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">port</span> <span class="o">=</span> <span class="kc">None</span></div>
            
            
<div class="viewcode-block" id="TinyG.reset"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyG.reset">[docs]</a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Resets the TinyG board.</span>

<span class="sd">        :returns: TinyG version information</span>
<span class="sd">        :rtype: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">homed</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1"># use timer for timeout</span>
        <span class="n">timer</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QTimer</span><span class="p">()</span>
        <span class="n">timer</span><span class="o">.</span><span class="n">setSingleShot</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="c1"># use local event loop to wait for &quot;query received&quot; signal</span>
        <span class="n">localloop</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QEventLoop</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">receiver</span><span class="o">.</span><span class="n">sigSystemReadyReceived</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">localloop</span><span class="o">.</span><span class="n">quit</span><span class="p">)</span>
        <span class="n">timer</span><span class="o">.</span><span class="n">timeout</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">localloop</span><span class="o">.</span><span class="n">quit</span><span class="p">)</span>
        <span class="n">timer</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span>
        <span class="c1"># send command and start loop</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigReset</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
        <span class="n">localloop</span><span class="o">.</span><span class="n">exec</span><span class="p">()</span>
        <span class="c1"># check for timeout</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">timer</span><span class="o">.</span><span class="n">isActive</span><span class="p">():</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Reset timeout error.&quot;</span><span class="p">)</span></div>
        
    
<div class="viewcode-block" id="TinyG.isInitialized"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyG.isInitialized">[docs]</a>    <span class="k">def</span> <span class="nf">isInitialized</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See :meth:Base.MachineBase.MachineBase.isInitialized</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">port</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span></div>
        
        
<div class="viewcode-block" id="TinyG.getPosition"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyG.getPosition">[docs]</a>    <span class="k">def</span> <span class="nf">getPosition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">absolute</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See :meth:Base.MachineBase.MachineBase.getPosition</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pos</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">lastStatus</span><span class="p">[</span><span class="s1">&#39;posx&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastStatus</span><span class="p">[</span><span class="s1">&#39;posy&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastStatus</span><span class="p">[</span><span class="s1">&#39;posz&#39;</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">absolute</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastStatus</span><span class="p">[</span><span class="s1">&#39;coor&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>    <span class="c1"># already in absolute coordinate system (G54)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">pos</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">workpieceOffset</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastStatus</span><span class="p">[</span><span class="s1">&#39;coor&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">pos</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">workpieceOffset</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>    <span class="c1"># already in workpiece coordinate system (G55)</span></div>
    
        
<div class="viewcode-block" id="TinyG.feedhold"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyG.feedhold">[docs]</a>    <span class="k">def</span> <span class="nf">feedhold</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See :meth:Base.MachineBase.MachineBase.feedhold</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigFeedhold</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span></div>
        
<div class="viewcode-block" id="TinyG.resume"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyG.resume">[docs]</a>    <span class="k">def</span> <span class="nf">resume</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See :meth:Base.MachineBase.MachineBase.resume</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigResume</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="TinyG.stop"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyG.stop">[docs]</a>    <span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See :meth:Base.MachineBase.MachineBase.stop</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigStop</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span></div>
            
            
<div class="viewcode-block" id="TinyG.jog"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyG.jog">[docs]</a>    <span class="k">def</span> <span class="nf">jog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">directions</span><span class="p">,</span> <span class="n">stepsize</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See :meth:Base.MachineBase.MachineBase.jog</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">target</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">stepsize</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">executeCommand</span><span class="p">({</span><span class="s2">&quot;gc&quot;</span><span class="p">:</span><span class="s2">&quot;g54&quot;</span><span class="p">})</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">executeCommand</span><span class="p">({</span><span class="s2">&quot;gc&quot;</span><span class="p">:</span><span class="s2">&quot;g90&quot;</span><span class="p">})</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPosition</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">target</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculateMaxSteps</span><span class="p">(</span><span class="n">directions</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">direction</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">directions</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">direction</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">target</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">pos</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">executeCommand</span><span class="p">({</span><span class="s2">&quot;gc&quot;</span><span class="p">:</span><span class="s2">&quot;g91&quot;</span><span class="p">})</span>
            <span class="n">target</span> <span class="o">=</span> <span class="p">[</span><span class="n">stepsize</span><span class="o">*</span><span class="n">direction</span> <span class="k">for</span> <span class="n">direction</span> <span class="ow">in</span> <span class="n">directions</span><span class="p">]</span>             
        <span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;g1&quot;</span>
        <span class="k">if</span> <span class="n">directions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">directions</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">command</span> <span class="o">+=</span> <span class="s2">&quot;f</span><span class="si">{}</span><span class="s2">x</span><span class="si">{}</span><span class="s2">y</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">jogspeedXY</span><span class="p">,</span> <span class="n">target</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">target</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">elif</span> <span class="n">directions</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">command</span> <span class="o">+=</span> <span class="s2">&quot;f</span><span class="si">{}</span><span class="s2">z</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">jogspeedZ</span><span class="p">,</span> <span class="n">target</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">executeCommand</span><span class="p">({</span><span class="s2">&quot;gc&quot;</span><span class="p">:</span><span class="n">command</span><span class="p">})</span></div>
        
        
<div class="viewcode-block" id="TinyG.goTo"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyG.goTo">[docs]</a>    <span class="k">def</span> <span class="nf">goTo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">absolute</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See :meth:Base.MachineBase.MachineBase.goTo</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># check position enumeration length</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">position</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">position</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">errs</span><span class="o">.</span><span class="n">InvalidArgument</span><span class="p">(</span><span class="s2">&quot;position&quot;</span><span class="p">,</span> <span class="s2">&quot;invalid length&quot;</span><span class="p">)</span>
        <span class="c1"># set requested coordinate system</span>
        <span class="k">if</span> <span class="n">absolute</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">executeCommand</span><span class="p">({</span><span class="s1">&#39;gc&#39;</span><span class="p">:</span><span class="s1">&#39;g54&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">executeCommand</span><span class="p">({</span><span class="s1">&#39;gc&#39;</span><span class="p">:</span><span class="s1">&#39;g55&#39;</span><span class="p">})</span>
            
        <span class="c1"># set absolute path mode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">executeCommand</span><span class="p">({</span><span class="s1">&#39;gc&#39;</span><span class="p">:</span><span class="s1">&#39;g90&#39;</span><span class="p">})</span>
        
        <span class="c1"># if the z-axis is moving towards the workpiece, z movement should happen after xy movement</span>
        <span class="c1"># if the z-axis is moving away from the workpiece, z movement should happen first</span>
        <span class="n">zfirst</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">zmove</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">position</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">zmove</span><span class="p">:</span>
            <span class="n">zfirst</span> <span class="o">=</span> <span class="p">(</span><span class="n">position</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPosition</span><span class="p">(</span><span class="n">absolute</span><span class="p">)[</span><span class="mi">2</span><span class="p">])</span>
        
        <span class="c1"># move to position</span>
        <span class="k">if</span> <span class="n">zmove</span> <span class="ow">and</span> <span class="n">zfirst</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">executeCommand</span><span class="p">({</span><span class="s2">&quot;gc&quot;</span><span class="p">:</span><span class="s2">&quot;g0z</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">position</span><span class="p">[</span><span class="mi">2</span><span class="p">])})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">executeCommand</span><span class="p">({</span><span class="s2">&quot;gc&quot;</span><span class="p">:</span><span class="s2">&quot;g0x</span><span class="si">{}</span><span class="s2">y</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">position</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">position</span><span class="p">[</span><span class="mi">1</span><span class="p">])})</span>
        <span class="k">if</span> <span class="n">zmove</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">zfirst</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">executeCommand</span><span class="p">({</span><span class="s2">&quot;gc&quot;</span><span class="p">:</span><span class="s2">&quot;g0z</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">position</span><span class="p">[</span><span class="mi">2</span><span class="p">])})</span></div>
        
        
<div class="viewcode-block" id="TinyG.setSpindle"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyG.setSpindle">[docs]</a>    <span class="k">def</span> <span class="nf">setSpindle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">enable</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See :meth:Base.MachineBase.MachineBase.setSpindle</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">enable</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">executeQuery</span><span class="p">({</span><span class="s2">&quot;gc&quot;</span><span class="p">:</span><span class="s2">&quot;m3&quot;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">executeQuery</span><span class="p">({</span><span class="s2">&quot;gc&quot;</span><span class="p">:</span><span class="s2">&quot;m5&quot;</span><span class="p">})</span></div>
            
            
<div class="viewcode-block" id="TinyG.setLaserCrosshair"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyG.setLaserCrosshair">[docs]</a>    <span class="k">def</span> <span class="nf">setLaserCrosshair</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">enable</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See :meth:Base.MachineBase.MachineBase.setLaserCrosshair</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">enable</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">executeQuery</span><span class="p">({</span><span class="s2">&quot;gc&quot;</span><span class="p">:</span><span class="s2">&quot;m8&quot;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">executeQuery</span><span class="p">({</span><span class="s2">&quot;gc&quot;</span><span class="p">:</span><span class="s2">&quot;m9&quot;</span><span class="p">})</span></div>
            
            
<div class="viewcode-block" id="TinyG.homingCycle"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyG.homingCycle">[docs]</a>    <span class="k">def</span> <span class="nf">homingCycle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See :meth:Base.MachineBase.MachineBase.homingCycle</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;TinyG homing cycle started.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">executeCommand</span><span class="p">({</span><span class="s2">&quot;gc&quot;</span><span class="p">:</span><span class="s2">&quot;g28.2x0y0z0&quot;</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">homed</span> <span class="o">=</span> <span class="kc">True</span><span class="p">;</span></div>
        
        
<div class="viewcode-block" id="TinyG.isHomed"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyG.isHomed">[docs]</a>    <span class="k">def</span> <span class="nf">isHomed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See :meth:Base.MachineBase.MachineBase.isHomed</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">homed</span><span class="p">;</span></div>
    
    
<div class="viewcode-block" id="TinyG.preparePlanner"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyG.preparePlanner">[docs]</a>    <span class="k">def</span> <span class="nf">preparePlanner</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See :meth:Base.MachineBase.MachineBase.preparePlanner</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plannerBuffer</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;g21&quot;</span><span class="p">,</span>      <span class="c1"># use mm</span>
            <span class="s2">&quot;g90&quot;</span><span class="p">,</span>      <span class="c1"># absolute position mode</span>
            <span class="s2">&quot;g55&quot;</span><span class="p">,</span>      <span class="c1"># use workpiece coordinate system</span>
            <span class="s2">&quot;g17&quot;</span><span class="p">,</span>      <span class="c1"># select XY plane for arcs</span>
            <span class="s2">&quot;m3&quot;</span><span class="p">,</span>       <span class="c1"># enable spindle</span>
            <span class="s2">&quot;g1f</span><span class="si">{}</span><span class="s2">z</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">jogspeedZ</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>   <span class="c1"># go to working distance</span>
        <span class="p">]</span></div>
        
<div class="viewcode-block" id="TinyG.finalizePlanner"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyG.finalizePlanner">[docs]</a>    <span class="k">def</span> <span class="nf">finalizePlanner</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See :meth:Base.MachineBase.MachineBase.finalizePlanner</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plannerBuffer</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
            <span class="s2">&quot;m2&quot;</span>        <span class="c1"># program end</span>
        <span class="p">])</span></div>
    
<div class="viewcode-block" id="TinyG.planJog"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyG.planJog">[docs]</a>    <span class="k">def</span> <span class="nf">planJog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See :meth:Base.MachineBase.MachineBase.planJog</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plannerBuffer</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;g1f</span><span class="si">{}</span><span class="s2">x</span><span class="si">{}</span><span class="s2">y</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">jogspeedXY</span><span class="p">,</span> <span class="o">*</span><span class="n">position</span><span class="p">))</span></div>
        
<div class="viewcode-block" id="TinyG.planMill"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyG.planMill">[docs]</a>    <span class="k">def</span> <span class="nf">planMill</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See :meth:Base.MachineBase.MachineBase.planMill</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plannerBuffer</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;g1f</span><span class="si">{}</span><span class="s2">x</span><span class="si">{}</span><span class="s2">y</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">millspeedXY</span><span class="p">,</span> <span class="o">*</span><span class="n">position</span><span class="p">))</span></div>
    
<div class="viewcode-block" id="TinyG.planMillArc"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyG.planMillArc">[docs]</a>    <span class="k">def</span> <span class="nf">planMillArc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">startposition</span><span class="p">,</span> <span class="n">endposition</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">ccw</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See :meth:Base.MachineBase.MachineBase.planMillArc</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">offset</span> <span class="o">=</span> <span class="p">(</span><span class="n">center</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="n">startposition</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">center</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">startposition</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">command</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">ccw</span><span class="p">:</span>
            <span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;g3&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;g2&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">startposition</span> <span class="o">==</span> <span class="n">endposition</span><span class="p">):</span>
            <span class="n">command</span> <span class="o">=</span> <span class="n">command</span> <span class="o">+</span> <span class="s2">&quot;x</span><span class="si">{}</span><span class="s2">y</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">*</span><span class="n">endposition</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plannerBuffer</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">command</span> <span class="o">+</span> <span class="s2">&quot;i</span><span class="si">{}</span><span class="s2">j</span><span class="si">{}</span><span class="s2">f</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">*</span><span class="n">offset</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">millspeedXY</span><span class="p">))</span></div>
    
<div class="viewcode-block" id="TinyG.planInfeed"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyG.planInfeed">[docs]</a>    <span class="k">def</span> <span class="nf">planInfeed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See :meth:Base.MachineBase.MachineBase.planInfeed</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plannerBuffer</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
            <span class="s2">&quot;g91&quot;</span><span class="p">,</span> 
            <span class="s2">&quot;g1f</span><span class="si">{}</span><span class="s2">z</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">infeedspeed</span><span class="p">,</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">infeeddepth</span><span class="p">),</span>
            <span class="s2">&quot;g90&quot;</span>
        <span class="p">])</span></div>
    
<div class="viewcode-block" id="TinyG.planOutfeed"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyG.planOutfeed">[docs]</a>    <span class="k">def</span> <span class="nf">planOutfeed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See :meth:Base.MachineBase.MachineBase.planOutfeed</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plannerBuffer</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
            <span class="s2">&quot;g91&quot;</span><span class="p">,</span>
            <span class="s2">&quot;g1f</span><span class="si">{}</span><span class="s2">z</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outfeedspeed</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">infeeddepth</span><span class="p">),</span>
            <span class="s2">&quot;g90&quot;</span>
        <span class="p">])</span></div>
        
        
<div class="viewcode-block" id="TinyG.setWorkpieceOrigin"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyG.setWorkpieceOrigin">[docs]</a>    <span class="k">def</span> <span class="nf">setWorkpieceOrigin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See :meth:Base.MachineBase.MachineBase.setWorkpieceOrigin</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPosition</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">workpieceOffset</span> <span class="o">=</span> <span class="p">[</span><span class="n">position</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="n">offset</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">position</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="n">offset</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">defaultOrigin</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">executeCommand</span><span class="p">({</span><span class="s1">&#39;gc&#39;</span><span class="p">:</span><span class="s1">&#39;g10l2p2x</span><span class="si">{}</span><span class="s1">y</span><span class="si">{}</span><span class="s1">z</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">workpieceOffset</span><span class="p">)})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">executeCommand</span><span class="p">({</span><span class="s1">&#39;gc&#39;</span><span class="p">:</span><span class="s1">&#39;g55&#39;</span><span class="p">})</span></div>


<div class="viewcode-block" id="TinyG.setDefaultOrigin"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyG.setDefaultOrigin">[docs]</a>    <span class="k">def</span> <span class="nf">setDefaultOrigin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See :meth:Base.MachineBase.MachineBase.setDefaultOrigin</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">setDefaultOrigin</span><span class="p">(</span><span class="n">position</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">workpieceOffset</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">defaultOrigin</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">executeCommand</span><span class="p">({</span><span class="s1">&#39;gc&#39;</span><span class="p">:</span><span class="s1">&#39;g10l2p2z</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">defaultOrigin</span><span class="p">[</span><span class="mi">2</span><span class="p">])})</span></div>
        
        
<div class="viewcode-block" id="TinyG.executeCycle"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyG.executeCycle">[docs]</a>    <span class="k">def</span> <span class="nf">executeCycle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See :meth:Base.MachineBase.MachineBase.executeCycle</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plannerBuffer</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="c1"># open cycle control dialog</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Executing TinyG cycle with </span><span class="si">%s</span><span class="s2"> commands.&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plannerBuffer</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cycledlg</span> <span class="o">=</span> <span class="n">TinyGCycleControl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">plannerBuffer</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">cmd</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plannerBuffer</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">executeCommand</span><span class="p">({</span><span class="s1">&#39;gc&#39;</span><span class="p">:</span><span class="n">cmd</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cycledlg</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plannerBuffer</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span></div>
        
        
<div class="viewcode-block" id="TinyG.executeCommand"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyG.executeCommand">[docs]</a>    <span class="k">def</span> <span class="nf">executeCommand</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Executes a single command asynchonously.</span>

<span class="sd">        :param dict command: Command to send</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigCommand</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">command</span><span class="p">)</span></div>
        
    
<div class="viewcode-block" id="TinyG.executeQuery"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyG.executeQuery">[docs]</a>    <span class="k">def</span> <span class="nf">executeQuery</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Executes a single command and returns the response (as dict) synchronously.</span>

<span class="sd">        :param dict command: Command to send</span>
<span class="sd">        :returns: Response</span>
<span class="sd">        :rtype: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># use timer for timeout</span>
        <span class="n">timer</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QTimer</span><span class="p">()</span>
        <span class="n">timer</span><span class="o">.</span><span class="n">setSingleShot</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="c1"># use local event loop to wait for &quot;query received&quot; signal</span>
        <span class="n">localloop</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QEventLoop</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sender</span><span class="o">.</span><span class="n">sigQueryReceived</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">localloop</span><span class="o">.</span><span class="n">quit</span><span class="p">)</span>
        <span class="n">timer</span><span class="o">.</span><span class="n">timeout</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">localloop</span><span class="o">.</span><span class="n">quit</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">querytimeout</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">timer</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">querytimeout</span><span class="o">*</span><span class="mi">1100</span><span class="p">)</span>
        <span class="c1"># send command and start loop</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigQuery</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>
        <span class="n">localloop</span><span class="o">.</span><span class="n">exec</span><span class="p">()</span>
        <span class="c1"># check for timeout</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">querytimeout</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">timer</span><span class="o">.</span><span class="n">isActive</span><span class="p">():</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Query timeout error.&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">errs</span><span class="o">.</span><span class="n">CommunicationError</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="s2">&quot;Timeout&quot;</span><span class="p">)</span>
        <span class="c1"># retrieve and return query data</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">sender</span><span class="o">.</span><span class="n">getLastQueryResult</span><span class="p">()</span></div>
    
    
<div class="viewcode-block" id="TinyG.send"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyG.send">[docs]</a>    <span class="k">def</span> <span class="nf">send</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Send a command dictionary {command:value} to the TinyG.</span>
<span class="sd">        Only the currently active TinyGSender object should call this function.</span>

<span class="sd">        :param dict command: command to send</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sendRaw</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">command</span><span class="p">))</span></div>
    
    
<div class="viewcode-block" id="TinyG.sendRaw"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyG.sendRaw">[docs]</a>    <span class="k">def</span> <span class="nf">sendRaw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Low level function to send a raw message to the TinyG.</span>
<span class="sd">        Only the currently active TinyGSender object should call this function.</span>

<span class="sd">        :param str message: Message to send</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Send: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">message</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">:</span>
            <span class="n">message</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="c1">#self.io.write(message)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">port</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span></div>
    
    
<div class="viewcode-block" id="TinyG.receive"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyG.receive">[docs]</a>    <span class="k">def</span> <span class="nf">receive</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Low level function which receives messages from the TinyG.</span>
<span class="sd">        Returns a dictionary with the received message or None on timeout.</span>
<span class="sd">        Only the currently active TinyGReceiver object should call this function.</span>

<span class="sd">        :returns: Recieved message (or None on timeout)</span>
<span class="sd">        :rtype: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#line = self.io.readline()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">isInitialized</span><span class="p">():</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">port</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">line</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Received: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="c1">#logger.debug(&quot;Read operation timeout.&quot;)</span>
        <span class="k">return</span> <span class="kc">None</span> </div>
    
    
<div class="viewcode-block" id="TinyG.applyParameters"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyG.applyParameters">[docs]</a>    <span class="k">def</span> <span class="nf">applyParameters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">hiddenparams</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Applies the given machine parameters to the hardware.</span>

<span class="sd">        :param pyqtgraph.GroupParameter params: GroupParameter containing the machine parameters</span>
<span class="sd">        :param pyqtgraph.GroupParameter hiddenparams: GroupParameter containing the hidden parameters</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">settings</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">child</span><span class="p">(</span><span class="s1">&#39;motor&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">getValues</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">child</span><span class="p">(</span><span class="s1">&#39;axis&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">getValues</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">child</span><span class="p">(</span><span class="s1">&#39;homing&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">getValues</span><span class="p">())</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">executeQuery</span><span class="p">({</span><span class="n">key</span><span class="p">:</span><span class="n">val</span><span class="p">[</span><span class="mi">0</span><span class="p">]})</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;TinyG parameters applied.&quot;</span><span class="p">)</span></div>
            
            
<div class="viewcode-block" id="TinyG.retrieveParameters"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyG.retrieveParameters">[docs]</a>    <span class="k">def</span> <span class="nf">retrieveParameters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See :meth:`Base.MachineBase.MachineBase.retrieveParameters`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getParameters</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">grp</span> <span class="ow">in</span> <span class="n">params</span><span class="o">.</span><span class="n">children</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">param</span> <span class="ow">in</span> <span class="n">grp</span><span class="o">.</span><span class="n">children</span><span class="p">():</span>
                <span class="n">cmd</span> <span class="o">=</span> <span class="n">param</span><span class="o">.</span><span class="n">name</span><span class="p">()</span>
                <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">executeQuery</span><span class="p">({</span><span class="n">cmd</span><span class="p">:</span><span class="kc">None</span><span class="p">})</span>
                <span class="n">param</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;r&#39;</span><span class="p">][</span><span class="n">cmd</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">params</span></div>
    
    
<div class="viewcode-block" id="TinyG.calculateMaxSteps"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyG.calculateMaxSteps">[docs]</a>    <span class="k">def</span> <span class="nf">calculateMaxSteps</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">directions</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the maximal possible step per direction (in mm) without exceeding soft limits.</span>
<span class="sd">        This is needed for continuous jogging.</span>

<span class="sd">        :param directions: Tuple of directions (1: positive, -1: negative, 0: not included) for (x, y, z) axis</span>
<span class="sd">        :type directions: tuple(int, int, int)</span>
<span class="sd">        :returns: maximal possible step (in mm) in the given directions</span>
<span class="sd">        :rtype: tuple(float, float, float)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s1">&#39;sl&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">1000</span><span class="p">]</span>
        <span class="n">steps</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="n">minPos</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s1">&#39;xtn&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s1">&#39;ytn&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s1">&#39;ztn&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]])</span><span class="o">+</span><span class="mi">1</span>
        <span class="n">maxPos</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s1">&#39;xtm&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s1">&#39;ytm&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s1">&#39;ztm&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]])</span><span class="o">-</span><span class="mi">1</span>
        <span class="c1">#logger.debug(&quot;min: %s&quot;, minPos)</span>
        <span class="c1">#logger.debug(&quot;max: %s&quot;, maxPos)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">direction</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">directions</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">direction</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">steps</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">minPos</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">steps</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">maxPos</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">steps</span></div>
    
    
<div class="viewcode-block" id="TinyG.receiver_sigStatusReportReceived"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyG.receiver_sigStatusReportReceived">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">receiver_sigStatusReportReceived</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Slot triggered when a status report is received.</span>

<span class="sd">        :param dict msg: status report</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lastStatus</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">msg</span><span class="p">[</span><span class="s1">&#39;sr&#39;</span><span class="p">])</span>
        <span class="n">statusmsg</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> (current coordinate system: </span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">getStatusMessage</span><span class="p">(</span><span class="s1">&#39;stat&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastStatus</span><span class="p">[</span><span class="s1">&#39;stat&#39;</span><span class="p">]),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">getStatusMessage</span><span class="p">(</span><span class="s1">&#39;coor&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastStatus</span><span class="p">[</span><span class="s1">&#39;coor&#39;</span><span class="p">])</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigStatusUpdate</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">statusmsg</span><span class="p">)</span></div>
    
    
<div class="viewcode-block" id="TinyG.checksum"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyG.checksum">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">checksum</span><span class="p">(</span><span class="n">rawmsg</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Computes a checksum for given received response message string.</span>
<span class="sd">        See https://en.wikipedia.org/wiki/Java_hashCode()</span>

<span class="sd">        TODO</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>
        
    
<div class="viewcode-block" id="TinyG.getStatusMessage"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyG.getStatusMessage">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">getStatusMessage</span><span class="p">(</span><span class="n">msgtype</span><span class="p">,</span> <span class="n">code</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a readable message string for the given status report code.</span>

<span class="sd">        ===================  ===========================================</span>
<span class="sd">        **Supported types**</span>
<span class="sd">        ===================  ===========================================</span>
<span class="sd">        footer               Response footer status code</span>
<span class="sd">        error                Error message error code</span>
<span class="sd">        stat                 Machine state</span>
<span class="sd">        momo                 Gcode motion mode</span>
<span class="sd">        unit                 Gcode units</span>
<span class="sd">        macs                 Raw machine state</span>
<span class="sd">        cycs                 Cycle state</span>
<span class="sd">        mots                 Motion state</span>
<span class="sd">        hold                 Feedhold state</span>
<span class="sd">        coor                 Gcode coordinate system</span>
<span class="sd">        plan                 Gcode arc plane</span>
<span class="sd">        path                 Gcode path control mode</span>
<span class="sd">        dist                 Gcode distance mode</span>
<span class="sd">        frmo                 Gcode feed rate mode</span>
<span class="sd">        ===================  ===========================================</span>

<span class="sd">        :param str msgtype: (string) type of status message</span>
<span class="sd">        :param int code: (int) status report code</span>
<span class="sd">        :returns: message</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">messages</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;footer&#39;</span><span class="p">:[</span><span class="s2">&quot;OK&quot;</span><span class="p">,</span> <span class="s2">&quot;Error&quot;</span><span class="p">],</span>
            <span class="s1">&#39;error&#39;</span><span class="p">:[],</span>
            <span class="s1">&#39;stat&#39;</span><span class="p">:[</span><span class="s2">&quot;Machine initializing&quot;</span><span class="p">,</span> <span class="s2">&quot;Machine ready&quot;</span><span class="p">,</span> <span class="s2">&quot;Machine in soft alarm state&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;Program stop or no more blocks&quot;</span><span class="p">,</span> <span class="s2">&quot;Program end&quot;</span><span class="p">,</span> <span class="s2">&quot;Motion is running&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;Motion is holding&quot;</span><span class="p">,</span> <span class="s2">&quot;Probe cycle active&quot;</span><span class="p">,</span> <span class="s2">&quot;Machine is homing&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;Machine is jogging&quot;</span><span class="p">,</span> <span class="s2">&quot;Machine in hard alarm state&quot;</span><span class="p">],</span>
            <span class="s1">&#39;momo&#39;</span><span class="p">:[</span><span class="s2">&quot;G0&quot;</span><span class="p">,</span> <span class="s2">&quot;G1&quot;</span><span class="p">,</span> <span class="s2">&quot;G2&quot;</span><span class="p">,</span> <span class="s2">&quot;G3&quot;</span><span class="p">,</span> <span class="s2">&quot;G80&quot;</span><span class="p">],</span>
            <span class="s1">&#39;unit&#39;</span><span class="p">:[</span><span class="s2">&quot;G20 (inch)&quot;</span><span class="p">,</span> <span class="s2">&quot;G21 (mm)&quot;</span><span class="p">],</span>
            <span class="s1">&#39;macs&#39;</span><span class="p">:[</span><span class="s2">&quot;Machine initializing&quot;</span><span class="p">,</span> <span class="s2">&quot;Machine ready&quot;</span><span class="p">,</span> <span class="s2">&quot;Machine in soft alarm state&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;Program stop or no more blocks&quot;</span><span class="p">,</span> <span class="s2">&quot;Program end&quot;</span><span class="p">,</span> <span class="s2">&quot;Machine in cycle&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;Machine in shutdown&quot;</span><span class="p">],</span>
            <span class="s1">&#39;cycs&#39;</span><span class="p">:[</span><span class="s2">&quot;No cycle&quot;</span><span class="p">,</span> <span class="s2">&quot;Normal cycle&quot;</span><span class="p">,</span> <span class="s2">&quot;Probe cycle&quot;</span><span class="p">,</span> <span class="s2">&quot;Homing cycle&quot;</span><span class="p">,</span> <span class="s2">&quot;Jog cycle&quot;</span><span class="p">],</span>
            <span class="s1">&#39;mots&#39;</span><span class="p">:[</span><span class="s2">&quot;Motion off&quot;</span><span class="p">,</span> <span class="s2">&quot;Motion run&quot;</span><span class="p">,</span> <span class="s2">&quot;Motion hold&quot;</span><span class="p">],</span>
            <span class="s1">&#39;hold&#39;</span><span class="p">:[</span><span class="s2">&quot;Feedhold off&quot;</span><span class="p">,</span> <span class="s2">&quot;Feedhold sync phase&quot;</span><span class="p">,</span> <span class="s2">&quot;Feedhold planning phase&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;Feedhold deceleration phase&quot;</span><span class="p">,</span> <span class="s2">&quot;Feedhold holding&quot;</span><span class="p">,</span> <span class="s2">&quot;Feedhold end hold&quot;</span><span class="p">],</span>
            <span class="s1">&#39;coor&#39;</span><span class="p">:[</span><span class="s2">&quot;G53&quot;</span><span class="p">,</span> <span class="s2">&quot;G54&quot;</span><span class="p">,</span> <span class="s2">&quot;G55&quot;</span><span class="p">,</span> <span class="s2">&quot;G56&quot;</span><span class="p">,</span> <span class="s2">&quot;G57&quot;</span><span class="p">,</span> <span class="s2">&quot;G58&quot;</span><span class="p">,</span> <span class="s2">&quot;G59&quot;</span><span class="p">],</span>
            <span class="s1">&#39;plan&#39;</span><span class="p">:[</span><span class="s2">&quot;G17 (xy)&quot;</span><span class="p">,</span> <span class="s2">&quot;G18 (xz)&quot;</span><span class="p">,</span> <span class="s2">&quot;G19 (yz)&quot;</span><span class="p">],</span>
            <span class="s1">&#39;path&#39;</span><span class="p">:[</span><span class="s2">&quot;G61 (exact path)&quot;</span><span class="p">,</span> <span class="s2">&quot;G61.1 (exact stop)&quot;</span><span class="p">,</span> <span class="s2">&quot;G64 (continuous)&quot;</span><span class="p">],</span>
            <span class="s1">&#39;dist&#39;</span><span class="p">:[</span><span class="s2">&quot;G90 (absolute)&quot;</span><span class="p">,</span> <span class="s2">&quot;G91 (incremental)&quot;</span><span class="p">],</span>
            <span class="s1">&#39;frmo&#39;</span><span class="p">:[</span><span class="s2">&quot;G93 (inv time)&quot;</span><span class="p">,</span> <span class="s2">&quot;G94 (u/min)&quot;</span><span class="p">,</span> <span class="s2">&quot;G95(u/rev)&quot;</span><span class="p">]</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">code</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid error code&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">msgtype</span> <span class="ow">in</span> <span class="n">messages</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid status message type.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">code</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">messages</span><span class="p">[</span><span class="n">msgtype</span><span class="p">]):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">messages</span><span class="p">[</span><span class="n">msgtype</span><span class="p">][</span><span class="n">code</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;Unknown&quot;</span>
        <span class="k">return</span> <span class="n">value</span></div>
        
    
<div class="viewcode-block" id="TinyG.getMachineMenu"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyG.getMachineMenu">[docs]</a>    <span class="k">def</span> <span class="nf">getMachineMenu</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See :meth:Base.MachineBase.MachineBase.getMachineMenu</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">menu</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QMenu</span><span class="p">(</span><span class="s2">&quot;TinyG&quot;</span><span class="p">)</span>
        <span class="n">testpanelaction</span> <span class="o">=</span> <span class="n">menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="s2">&quot;Com Testpanel&quot;</span><span class="p">)</span>
        <span class="n">testpanelaction</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mnuTinyGTestpanel_triggered</span><span class="p">)</span>
        <span class="n">resetaction</span> <span class="o">=</span> <span class="n">menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="s2">&quot;Reset&quot;</span><span class="p">)</span>
        <span class="n">resetaction</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mnuTinyGReset_triggered</span><span class="p">)</span>
        <span class="n">clearaction</span> <span class="o">=</span> <span class="n">menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="s2">&quot;Clear&quot;</span><span class="p">)</span>
        <span class="n">clearaction</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mnuTinyGClear_triggered</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">menu</span></div>
        
    
<div class="viewcode-block" id="TinyG.mnuTinyGTestpanel_triggered"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyG.mnuTinyGTestpanel_triggered">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">mnuTinyGTestpanel_triggered</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Slot triggered when the testpanel menu entry is clicked</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">isInitialized</span><span class="p">():</span>
            <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;Not initialized&quot;</span><span class="p">,</span> 
                <span class="s2">&quot;Machine communication is not initialized!&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">testpanel</span> <span class="o">=</span> <span class="n">TinyGTestpanel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">testpanel</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></div>
        
<div class="viewcode-block" id="TinyG.mnuTinyGReset_triggered"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyG.mnuTinyGReset_triggered">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">mnuTinyGReset_triggered</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Slot triggered when the reset menu entry is clicked</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">isInitialized</span><span class="p">():</span>
            <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;Not initialized&quot;</span><span class="p">,</span> 
                <span class="s2">&quot;Machine communication is not initialized!&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="TinyG.mnuTinyGClear_triggered"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyG.mnuTinyGClear_triggered">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">mnuTinyGClear_triggered</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Slot triggered when the clear menu entry is clicked</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">isInitialized</span><span class="p">():</span>
            <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;Not initialized&quot;</span><span class="p">,</span> 
                <span class="s2">&quot;Machine communication is not initialized!&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">executeCommand</span><span class="p">({</span><span class="s2">&quot;clear&quot;</span><span class="p">:</span><span class="kc">None</span><span class="p">})</span></div>
    
    
<div class="viewcode-block" id="TinyG.getComParameters"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyG.getComParameters">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">getComParameters</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See :meth:Base.MachineBase.MachineBase.getComParameters</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;TinyGComSettings&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;group&#39;</span><span class="p">,</span> <span class="s1">&#39;children&#39;</span><span class="p">:[</span>
                <span class="p">{</span>
                    <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;com&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Com Port&#39;</span><span class="p">,</span> 
                    <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;list&#39;</span><span class="p">,</span> 
                    <span class="s1">&#39;values&#39;</span><span class="p">:{</span><span class="n">port</span><span class="o">.</span><span class="n">description</span><span class="p">:</span> <span class="n">port</span><span class="o">.</span><span class="n">device</span> <span class="k">for</span> <span class="n">port</span> <span class="ow">in</span> <span class="n">slp</span><span class="o">.</span><span class="n">comports</span><span class="p">()}</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;baud&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Baudrate&#39;</span><span class="p">,</span> 
                    <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;list&#39;</span><span class="p">,</span> 
                    <span class="s1">&#39;values&#39;</span><span class="p">:[</span><span class="mi">9600</span><span class="p">,</span> <span class="mi">19200</span><span class="p">,</span> <span class="mi">38400</span><span class="p">,</span> <span class="mi">57600</span><span class="p">,</span> <span class="mi">115200</span><span class="p">,</span> <span class="mi">230400</span><span class="p">],</span>
                    <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">115200</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;flowctrl&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Flow Control&#39;</span><span class="p">,</span> 
                    <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;list&#39;</span><span class="p">,</span> 
                    <span class="s1">&#39;values&#39;</span><span class="p">:{</span><span class="s1">&#39;None&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;XON/XOFF&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;RTS/CTS&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">},</span> 
                    <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="s1">&#39;None&#39;</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;timeout&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Timeout (s)&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;float&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                    <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
                    <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">1</span>
                <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">ptypes</span><span class="o">.</span><span class="n">GroupParameter</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="TinyG.updateComParameters"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyG.updateComParameters">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">updateComParameters</span><span class="p">(</span><span class="n">params</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See :meth:Base.MachineBase.MachineBase.updateComParameters</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ports</span> <span class="o">=</span> <span class="p">{</span><span class="n">port</span><span class="o">.</span><span class="n">description</span><span class="p">:</span> <span class="n">port</span><span class="o">.</span><span class="n">device</span> <span class="k">for</span> <span class="n">port</span> <span class="ow">in</span> <span class="n">slp</span><span class="o">.</span><span class="n">comports</span><span class="p">()}</span>
        <span class="n">params</span><span class="o">.</span><span class="n">child</span><span class="p">(</span><span class="s1">&#39;com&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setOpts</span><span class="p">(</span><span class="n">values</span><span class="o">=</span><span class="n">ports</span><span class="p">,</span> <span class="n">limits</span><span class="o">=</span><span class="n">ports</span><span class="p">)</span></div>
    
    
<div class="viewcode-block" id="TinyG.getParameters"><a class="viewcode-back" href="../../_docsrc/api/Machines.html#Machines.TinyG.TinyG.getParameters">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">getParameters</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See :meth:Base.MachineBase.MachineBase.getParameters</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;TinyGSettings&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;group&#39;</span><span class="p">,</span> <span class="s1">&#39;children&#39;</span><span class="p">:[</span>
                <span class="p">{</span>
                    <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;general&#39;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;General settings&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;group&#39;</span><span class="p">,</span> <span class="s1">&#39;children&#39;</span><span class="p">:[</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;si&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Status report interval (ms)&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;int&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="mi">50</span><span class="p">,</span>
                            <span class="s1">&#39;max&#39;</span><span class="p">:</span><span class="mi">1000</span><span class="p">,</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">200</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">200</span>
                        <span class="p">}</span>
                    <span class="p">]</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;motor&#39;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Motor settings&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;group&#39;</span><span class="p">,</span> <span class="s1">&#39;children&#39;</span><span class="p">:[</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;1ma&#39;</span><span class="p">,</span> 
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Motor 1 axis&#39;</span><span class="p">,</span> 
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;list&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;values&#39;</span><span class="p">:{</span><span class="s1">&#39;X&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Y&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Z&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">},</span> 
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> 
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">0</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;2ma&#39;</span><span class="p">,</span> 
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Motor 2 axis&#39;</span><span class="p">,</span> 
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;list&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;values&#39;</span><span class="p">:{</span><span class="s1">&#39;X&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Y&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Z&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">},</span> 
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> 
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">1</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;3ma&#39;</span><span class="p">,</span> 
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Motor 3 axis&#39;</span><span class="p">,</span> 
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;list&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;values&#39;</span><span class="p">:{</span><span class="s1">&#39;X&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Y&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Z&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">},</span> 
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> 
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">2</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;1sa&#39;</span><span class="p">,</span> 
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Motor 1 step angle (deg)&#39;</span><span class="p">,</span> 
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;float&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mf">1.8</span><span class="p">,</span> 
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mf">1.8</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;2sa&#39;</span><span class="p">,</span> 
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Motor 2 step angle (deg)&#39;</span><span class="p">,</span> 
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;float&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mf">1.8</span><span class="p">,</span> 
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mf">1.8</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;3sa&#39;</span><span class="p">,</span> 
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Motor 3 step angle (deg)&#39;</span><span class="p">,</span> 
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;float&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mf">1.8</span><span class="p">,</span> 
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mf">1.8</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;1tr&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Motor 1 travel per revolution (mm)&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;float&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                            <span class="s1">&#39;decimals&#39;</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mf">2.54</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mf">2.54</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;2tr&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Motor 2 travel per revolution (mm)&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;float&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                            <span class="s1">&#39;decimals&#39;</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mf">2.54</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mf">2.54</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;3tr&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Motor 3 travel per revolution (mm)&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;float&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                            <span class="s1">&#39;decimals&#39;</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mf">2.54</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mf">2.54</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;1mi&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Motor 1 microsteps&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;list&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;values&#39;</span><span class="p">:[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">2</span>
                        <span class="p">}</span>
                        <span class="p">,</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;2mi&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Motor 2 microsteps&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;list&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;values&#39;</span><span class="p">:[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">2</span>
                        <span class="p">}</span>
                        <span class="p">,</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;3mi&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Motor 3 microsteps&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;list&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;values&#39;</span><span class="p">:[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">2</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;1po&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Motor 1 polarity&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;list&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;values&#39;</span><span class="p">:{</span><span class="s1">&#39;Clockwise&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Counterclockwise&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">},</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">0</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;2po&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Motor 2 polarity&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;list&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;values&#39;</span><span class="p">:{</span><span class="s1">&#39;Clockwise&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Counterclockwise&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">},</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">0</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;3po&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Motor 3 polarity&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;list&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;values&#39;</span><span class="p">:{</span><span class="s1">&#39;Clockwise&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Counterclockwise&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">},</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">0</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;1pm&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Motor 1 power management&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;list&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;values&#39;</span><span class="p">:{</span><span class="s1">&#39;Motor disabled&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Always on&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;On during cycle&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;On when moving&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">},</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">2</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;2pm&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Motor 2 power management&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;list&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;values&#39;</span><span class="p">:{</span><span class="s1">&#39;Motor disabled&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Always on&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;On during cycle&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;On when moving&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">},</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">2</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;3pm&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Motor 3 power management&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;list&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;values&#39;</span><span class="p">:{</span><span class="s1">&#39;Motor disabled&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Always on&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;On during cycle&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;On when moving&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">},</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">2</span>
                        <span class="p">}</span>
                    <span class="p">]</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;axis&#39;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Axis settings&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;group&#39;</span><span class="p">,</span> <span class="s1">&#39;children&#39;</span><span class="p">:[</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;xfr&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;X axis feed rate upper limit (mm/min)&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;float&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">1000</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">1000</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;yfr&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Y axis feed rate upper limit (mm/min)&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;float&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">1000</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">1000</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;zfr&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Z axis feed rate upper limit (mm/min)&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;float&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">1000</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">1000</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;sl&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Enable soft limits&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;list&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;values&#39;</span><span class="p">:{</span><span class="s1">&#39;No&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Yes&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">},</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">1</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;xtn&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;X axis travel minimum (mm)&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;float&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">0</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;xtm&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;X axis travel maximum (mm)&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;float&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">300</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">300</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;ytn&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Y axis travel minimum (mm)&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;float&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">0</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;ytm&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Y axis travel maximum (mm)&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;float&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">300</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">300</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;ztn&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Z axis travel minimum (mm)&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;float&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">0</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;ztm&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Z axis travel maximum (mm)&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;float&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">300</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">300</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;xjm&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;X axis maximum jerk (10^6 mm/min^3)&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;float&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">50</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">50</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;yjm&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Y axis maximum jerk (10^6 mm/min^3)&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;float&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">50</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">50</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;zjm&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Z axis maximum jerk (10^6 mm/min^3)&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;float&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">50</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">50</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;xjd&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;X axis junction deviation (mm)&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;float&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mf">0.05</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mf">0.05</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;yjd&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Y axis junction deviation (mm)&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;float&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mf">0.05</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mf">0.05</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;zjd&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Z axis junction deviation (mm)&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;float&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mf">0.05</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mf">0.05</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;ja&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Junction acceleration (mm/min^2)&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;float&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">50000</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">50000</span>
                        <span class="p">}</span>
                    <span class="p">]</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;homing&#39;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Homing settings&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;group&#39;</span><span class="p">,</span> <span class="s1">&#39;children&#39;</span><span class="p">:[</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;st&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Switch type&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;list&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;values&#39;</span><span class="p">:{</span><span class="s1">&#39;Normally open&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Normally closed&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">},</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">1</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;xsn&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;X minimum switch&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;list&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;values&#39;</span><span class="p">:{</span><span class="s1">&#39;Disabled&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Homing only&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Limit only&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Homing &amp; limit&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">},</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">3</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;xsx&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;X maximum switch&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;list&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;values&#39;</span><span class="p">:{</span><span class="s1">&#39;Disabled&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Homing only&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Limit only&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Homing &amp; limit&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">},</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">0</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;ysn&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Y minimum switch&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;list&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;values&#39;</span><span class="p">:{</span><span class="s1">&#39;Disabled&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Homing only&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Limit only&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Homing &amp; limit&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">},</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">3</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;ysx&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Y maximum switch&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;list&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;values&#39;</span><span class="p">:{</span><span class="s1">&#39;Disabled&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Homing only&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Limit only&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Homing &amp; limit&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">},</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">0</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;zsn&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Z minimum switch&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;list&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;values&#39;</span><span class="p">:{</span><span class="s1">&#39;Disabled&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Homing only&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Limit only&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Homing &amp; limit&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">},</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">0</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;asx&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;A axis maximum switch&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;list&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;values&#39;</span><span class="p">:{</span><span class="s1">&#39;Disabled&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Limit only&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">},</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">2</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;asn&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;A axis minimum switch&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;list&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;values&#39;</span><span class="p">:{</span><span class="s1">&#39;Disabled&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Limit only&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">},</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">2</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;zsx&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Z maximum switch&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;list&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;values&#39;</span><span class="p">:{</span><span class="s1">&#39;Disabled&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Homing only&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Limit only&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Homing &amp; limit&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">},</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">3</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;xsv&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;X axis homing search velocity (mm/min)&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;float&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">500</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">500</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;ysv&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Y axis homing search velocity (mm/min)&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;float&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">500</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">500</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;zsv&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Z axis homing search velocity (mm/min)&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;float&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">500</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">500</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;xlv&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;X axis homing latch velocity (mm/min)&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;float&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">100</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">100</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;ylv&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Y axis homing latch velocity (mm/min)&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;float&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">10</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;zlv&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Z axis homing latch velocity (mm/min)&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;float&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">10</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;xjh&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;X axis homing jerk (10^6 mm/min^3)&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;float&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">100</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">100</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;yjh&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Y axis homing jerk (10^6 mm/min^3)&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;float&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">100</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">100</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;zjh&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Z axis homing jerk (10^6 mm/min^3)&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;float&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">100</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">100</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;xlb&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;X axis homing backoff (mm)&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;float&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">5</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;ylb&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Y axis homing backoff (mm)&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;float&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">5</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;zlb&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Z axis homing backoff (mm)&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;float&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">5</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;xzb&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;X axis zero backoff (mm)&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;float&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">5</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;yzb&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Y axis zero backoff (mm)&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;float&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">5</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;zzb&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="s1">&#39;Z axis zero backoff (mm)&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;float&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                            <span class="s1">&#39;default&#39;</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span><span class="mi">5</span>
                        <span class="p">}</span>
                    <span class="p">]</span>
                <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">ptypes</span><span class="o">.</span><span class="n">GroupParameter</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">)</span></div></div>
        
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../docindex.html">ESCMillPCB  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Module code</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Christian Ott.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
  </body>
</html>